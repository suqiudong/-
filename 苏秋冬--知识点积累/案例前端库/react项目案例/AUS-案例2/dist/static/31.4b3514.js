webpackJsonp([31,51],{12:function(e,t){"use strict";function a(e,t){var a={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(a.scrollX=e.scrollX);var d=void 0;return d=t?$("#"+e.id).dataTable(a):$("#"+e.id).DataTable(a)}function d(e,t,a,d){$("#"+e+" tbody").off(t,a).on(t,a,d)}function r(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.bindTableEvent=d,t.getTableItem=r},141:function(e,t){"use strict";function a(e){for(var t=[],a={},d=0;d<e.length;d++)a[e[d]]||(t.push(e[d]),a[e[d]]=1);return t}function d(e){if(!isNaN(Number(e))&&Number(e)&&Number(e)>=0){for(var t=0,a=["B","KB","M","G","T"];Math.abs(e)>=1024&&(e/=1024,t++,4!==t););var d=Number(e).toFixed(2);return d+" "+a[t]}return"0B"}function r(e,t){if(!e)return"-";var a=0,d=0,r="";d=e.length;for(var o=0;o<d;o++){var l=e.charAt(o);if(a++,escape(l).length>4&&a++,r=r.concat(l),a>=t)return r=r.concat("...")}return a<t?e:void 0}function o(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in a)new RegExp("("+d+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[d]:("00"+a[d]).substr((""+a[d]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayUnique=a,t.unitTransform=d,t.cutStr=r,t.dateFormat=o},584:function(e,t,a){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),o=d(r),l=a(6),i=d(l),n=a(3),s=d(n),u=a(4),c=d(u),f=a(8),p=d(f),m=a(7),v=d(m),h=a(2),b=(d(h),a(12)),g=d(b),N=a(141),x=(0,o.default)("div",{className:"box-header with-border "},void 0,(0,o.default)("p",{className:"box-title"},void 0,"基本信息")),y=(0,o.default)("label",{htmlFor:"datasetName"},void 0,"名称 : "),w=(0,o.default)("label",{htmlFor:"isPartition"},void 0,"是否分区 : "),R=(0,o.default)("label",{htmlFor:"isVisible"},void 0,"可见性 : "),_=(0,o.default)("label",{},void 0,"分片数 : "),S=(0,o.default)("label",{},void 0,"副本数 : "),T=(0,o.default)("div",{className:"box-header with-border "},void 0,(0,o.default)("p",{className:"box-title"},void 0,"字段")),D=(0,o.default)("div",{className:"box-header pull-left"},void 0),M=(0,o.default)("thead",{},void 0,(0,o.default)("tr",{},void 0,(0,o.default)("th",{}),(0,o.default)("th",{},void 0,"字段名"),(0,o.default)("th",{},void 0,"字段描述"),(0,o.default)("th",{},void 0,"字段类型"),(0,o.default)("th",{},void 0,"存储"),(0,o.default)("th",{},void 0,"索引"),(0,o.default)("th",{},void 0,"分词"),(0,o.default)("th",{},void 0,"主键"))),O=(0,o.default)("div",{className:"box-header with-border"},void 0,(0,o.default)("p",{className:"box-title"},void 0,"分区信息")),C=(0,o.default)("label",{htmlFor:"partitionField"},void 0,"分区字段："),F=(0,o.default)("label",{htmlFor:"partitionRule"},void 0,"分区规则："),A=function(e){function t(e){(0,s.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.updateDataSetHandler=a.updateDataSetHandler.bind(a),a.crateTableHandler=a.crateTableHandler.bind(a),a.fieldDetailHandler=a.fieldDetailHandler.bind(a),a}return(0,v.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.getDataset(this.props.params.datasetName)}},{key:"updateDataSetHandler",value:function(){this.props.history.replace("/dataSet/update/"+this.props.params.datasetName)}},{key:"componentDidUpdate",value:function(){this.crateTableHandler(),0==this.props.dataset.selectedRecord.isPartition?$('div[name = "partitionArea"]').hide():$('div[name = "partitionArea"]').show()}},{key:"crateTableHandler",value:function(){var e={};e.id="schema",e.columns=[{className:"textCenter",orderable:!1,data:null,defaultContent:""},{data:"fieldName",render:function(e,t,a){return e?e.indexOf("<input")!=-1?e:(0,N.cutStr)(e,15):e},orderable:!1},{data:"name",render:function(e,t,a){return e?e.indexOf("<input")!=-1?e:(0,N.cutStr)(e,15):e},orderable:!1},{data:"type",orderable:!1},{data:"store",render:function(e,t,a,d){return"false"==e?"否":"true"==e?"是":void 0},orderable:!1,defaultContent:"-"},{data:"index",render:function(e,t,a,d){return"not_analyzed"==e||"analyzed"==e?"是":"no"==e?"否":void 0},orderable:!1,defaultContent:"-"},{data:"analyzer",orderable:!1,defaultContent:"-"},{data:"key",render:function(e,t,a,d){return"false"==e?"否":"true"==e?"是":void 0},orderable:!1,defaultContent:"-"}],e.dom='<"top">rt<"bottom"i>',e.scrollX=!0,e.paging=!1,e.createdRow=function(e,t,a){var d="<i class='fa fa-circle-thin mt10'></i>";"nested"===t.type&&(d="<span class='row-details row-details-close mt10'></span>"),t.fieldName.indexOf("<input")==-1&&$("td:eq(1)",e).attr("title",t.fieldName),t.name.indexOf("<input")==-1&&$("td:eq(2)",e).attr("title",t.name),$("td:eq(0)",e).html(d)},e.data=this.props.dataset.selectedRecord.schema.properties,(0,g.default)(e),$("#schema").on("click","tbody td .row-details",this.fieldDetailHandler)}},{key:"fieldDetailHandler",value:function(e){var t=$("#schema").DataTable(),a=$(e.currentTarget).parents("tr"),d=t.row(a);if(d.child.isShown())$(e.currentTarget).addClass("row-details-close").removeClass("row-details-open"),d.child.hide();else{if($(e.currentTarget).addClass("row-details-open").removeClass("row-details-close"),d.child())return void d.child.show();d.child('<div id="nestRow_'+d.index()+'">\n                           <table id="nestTable_'+d.index()+'"  class="table table-bordered" width="100%">\n                           <thead>\n                               <tr>\n                                   <th>子字段名</th>\n                                   <th>子字段描述</th>\n                                   <th>子字段类型</th>\n                                   <th>存储</th>\n                                   <th>索引</th>\n                                   <th>分词</th>\n                                   <th>主键</th>\n                               </tr>\n                           </thead>\n                        </table></div>').show();var r={};r.id="nestTable_"+d.index(),r.columns=[{data:"fieldName",render:function(e,t,a){return e?e.indexOf("<input")!=-1?e:(0,N.cutStr)(e,15):e},orderable:!1},{data:"name",render:function(e,t,a){return e?e.indexOf("<input")!=-1?e:(0,N.cutStr)(e,15):e},orderable:!1},{data:"type",orderable:!1},{data:"store",render:function(e,t,a,d){return"false"==e?"否":"true"==e?"是":void 0},orderable:!1,defaultContent:"-"},{data:"index",render:function(e,t,a,d){return"not_analyzed"==e||"analyzed"==e?"是":"no"==e?"否":void 0},orderable:!1,defaultContent:"-"},{data:"analyzer",orderable:!1,defaultContent:"-"},{data:"key",render:function(e,t,a,d){return"false"==e?"否":"true"==e?"是":void 0},orderable:!1,defaultContent:"-"}],r.paging=!1,r.dom='<"top">rt<"bottom"i>',r.scrollX=!0,r.createdRow=function(e,t,a){t.fieldName.indexOf("<input")==-1&&$("td:eq(0)",e).attr("title",t.fieldName),t.name.indexOf("<input")==-1&&$("td:eq(1)",e).attr("title",t.name)},r.data=d.data().schema,(0,g.default)(r)}}},{key:"render",value:function(){var e="",t="是",a="共享";0==this.props.dataset.selectedRecord.isPartition&&(t="否"),"PRIVATE"==this.props.dataset.selectedRecord.visable&&(a="私有");var d="",r=sessionStorage.getItem("XDataUserName");return this.props.dataset.selectedRecord.owner==r&&sessionStorage.getItem("userRolePermission").indexOf("DATASET_MODIFY")!=-1&&(d=(0,o.default)("button",{type:"button",className:"ensure btn btn-primary sp_btn datasetModify",onClick:this.updateDataSetHandler},void 0,"修改")),this.props.dataset.selectedRecord.partitionRule&&(e=this.props.dataset.selectedRecord.partitionRule),e.indexOf("d")!=-1?e=e.substring(0,e.length-1)+" 天":e.indexOf("w")!=-1?e=e.substring(0,e.length-1)+" 周":e.indexOf("M")!=-1?e=e.substring(0,e.length-1)+" 月":e.indexOf("y")!=-1&&(e=e.substring(0,e.length-1)+" 年"),(0,o.default)("div",{id:"datasetAdd"},void 0,(0,o.default)("div",{className:"box box-primary"},void 0,x,(0,o.default)("div",{className:"box-body"},void 0,(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"col-md-6 form-group"},void 0,y,(0,o.default)("span",{className:"detailSpan ml10"},void 0,this.props.dataset.selectedRecord.datasetName)),(0,o.default)("div",{name:"isPartition",className:"form-group col-md-3"},void 0,w,(0,o.default)("span",{className:"detailSpan ml10"},void 0,t)),(0,o.default)("div",{name:"isVisible",className:"form-group col-md-3"},void 0,R,(0,o.default)("span",{className:"detailSpan ml10"},void 0,a))),(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"col-md-6 form-group"},void 0,_,(0,o.default)("span",{className:"detailSpan ml10"},void 0,this.props.dataset.selectedRecord.shard)),(0,o.default)("div",{className:"col-md-6 form-group"},void 0,S,(0,o.default)("span",{className:"detailSpan ml10"},void 0,this.props.dataset.selectedRecord.replication))))),(0,o.default)("div",{className:"box box-primary"},void 0,T,(0,o.default)("div",{className:"row box-body"},void 0,(0,o.default)("div",{className:"col-md-12"},void 0,D,(0,o.default)("div",{className:"box-body"},void 0,(0,o.default)("table",{id:"schema",className:"table table-striped table-bordered",style:{width:"100%"}},void 0,M))))),(0,o.default)("div",{name:"partitionArea",className:"box box-primary"},void 0,O,(0,o.default)("div",{className:"partition box-body"},void 0,(0,o.default)("div",{className:"partitionDetails row"},void 0,(0,o.default)("div",{className:"form-group col-md-6"},void 0,C,(0,o.default)("span",{className:"detailSpan ml10"},void 0," ",this.props.dataset.selectedRecord.partitionField," ")),(0,o.default)("div",{className:"form-group col-md-6"},void 0,F,(0,o.default)("span",{className:"detailSpan ml10"},void 0," ",e," "))))),d)}}]),t}(h.Component);t.default=A}});