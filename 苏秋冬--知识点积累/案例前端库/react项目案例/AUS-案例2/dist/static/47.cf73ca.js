webpackJsonp([47,51],{608:function(e,a,o){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var i=o(5),d=t(i),l=o(6),n=t(l),u=o(3),r=t(u),s=o(4),p=t(s),f=o(8),v=t(f),c=o(7),m=t(c),h=o(2),g=t(h),b=o(147),y=t(b),N=o(10),k=void 0,H=!1,w=(0,d.default)("div",{className:"box-header"},void 0,(0,d.default)("h4",{},void 0,"插件详细信息")),x=(0,d.default)("span",{},void 0,"插件名："),I=(0,d.default)("span",{},void 0,"jar包名："),M=(0,d.default)("span",{},void 0,"所有者："),C=(0,d.default)("span",{},void 0,"开发者："),_=(0,d.default)("span",{},void 0,"描述信息："),S=(0,d.default)("span",{},void 0,"版本号："),j=(0,d.default)("div",{className:"box-header"},void 0,(0,d.default)("h4",{},void 0,"上传插件")),P=(0,d.default)("span",{className:"uploadfilename"}),D=(0,d.default)("div",{className:"uploadbtn"},void 0,(0,d.default)("i",{className:"fa fa-upload"})," 点击上传插件"),F=(0,d.default)("div",{id:"upload"}),O=(0,d.default)("div",{id:"output"}),K=function(e){function a(e){(0,r.default)(this,a);var o=(0,v.default)(this,(a.__proto__||(0,n.default)(a)).call(this,e));return o.returnHander=o.returnHander.bind(o),o.returnOKHander=o.returnOKHander.bind(o),o.installHander=o.installHander.bind(o),o}return(0,m.default)(a,e),(0,p.default)(a,[{key:"componentDidMount",value:function(){var e=this;k=$("#upload").uploadFile({url:"/PluginManager/upload",maxFileCount:1,showDone:!1,showPreview:!1,dragDrop:!1,showProgress:!0,showFileCounter:!1,fileName:"pluginFile",uploadStr:"插件上传",abortStr:"移除",showAbort:!0,cancelStr:"取消",returnType:"json",showQueueDiv:"output",onSuccess:function(a,o){H=!1,$(".ajax-file-upload-container").hide(),0==o.code?((0,N.success)("上传成功！"),$("#output").empty(),$(".uploadbtn").hide(),$(".uploadfilename").append(a[0]),e.props.pluginFileInfo(o)):"302"==o.code?((0,N.error)(o.msg),setTimeout(function(){sessionStorage.removeItem("XDataUserName"),sessionStorage.removeItem("userRolePermission"),window.location.replace("/")},1e3)):((0,N.error)(o.msg),$(".uploadbtn").show())},onError:function(){H=!1,(0,N.error)("上传失败！"),$(".ajax-file-upload-container").hide(),$("#output").empty()}})}},{key:"componentWillUnmount",value:function(){H=!1}},{key:"uploadHandler",value:function(e){H=!0,e.stopPropagation(),$("#upload input").click()}},{key:"returnHander",value:function(){return H?($("#back").modal("show"),void this.refs.back.setContent("正在上传插件，确定终止上传并返回？")):void this.props.history.replace("/plugin")}},{key:"returnOKHander",value:function(){k.stopUpload(),$("#back").modal("hide"),this.props.history.replace("/plugin")}},{key:"installHander",value:function(){var e=this,a=this.props.pluginManage.fileInfo.result;this.props.pluginInstall(a),0==this.props.pluginManage.isInstall.code&&setTimeout(function(){e.props.history.replace("/plugin")},1e3)}},{key:"render",value:function(){var e=void 0,a=void 0;return 0==this.props.pluginManage.fileInfo.code?(a="",e=(0,d.default)("div",{className:"box box-primary"},void 0,(0,d.default)("div",{className:"row"},void 0,(0,d.default)("div",{className:"col-md-12"},void 0,w,(0,d.default)("div",{className:"box-body"},void 0,(0,d.default)("div",{},void 0,x,(0,d.default)("p",{},void 0,this.props.pluginManage.fileInfo.result.pluginName)),(0,d.default)("div",{},void 0,I,(0,d.default)("p",{},void 0,this.props.pluginManage.fileInfo.result.jarName)),(0,d.default)("div",{},void 0,M,(0,d.default)("p",{},void 0,this.props.pluginManage.fileInfo.result.owner)),(0,d.default)("div",{},void 0,C,(0,d.default)("p",{},void 0,this.props.pluginManage.fileInfo.result.developer)),(0,d.default)("div",{},void 0,_,(0,d.default)("p",{style:{marginLeft:"70px"}},void 0,this.props.pluginManage.fileInfo.result.description)),(0,d.default)("div",{},void 0,S,(0,d.default)("p",{},void 0,this.props.pluginManage.fileInfo.result.version)),(0,d.default)("div",{style:{marginTop:"20px"}},void 0,(0,d.default)("button",{type:"submit",className:"btn btn-primary",style:{marginRight:"20px"},onClick:this.returnHander},void 0,"返回"),(0,d.default)("button",{type:"submit",className:"btn btn-primary",onClick:this.installHander},void 0,"安装"))))))):a=(0,d.default)("button",{type:"submit",className:"btn btn-primary",onClick:this.returnHander},void 0,"返回"),(0,d.default)("div",{id:"pluginAdd"},void 0,(0,d.default)("div",{className:"box box-primary"},void 0,(0,d.default)("div",{className:"row"},void 0,(0,d.default)("div",{className:"col-md-12"},void 0,j,(0,d.default)("div",{className:"box-body"},void 0,(0,d.default)("div",{className:"uploadStr",onClick:this.uploadHandler},void 0,P,D,F),O),(0,d.default)("div",{className:"box-footer"},void 0,a))),g.default.createElement(y.default,{modalId:"back",ref:"back",title:"确认返回",okHandler:this.returnOKHander})),e)}}]),a}(h.Component);a.default=K}});