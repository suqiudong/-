webpackJsonp([1,51],{12:function(e,t){"use strict";function r(e,t){var r={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(r.scrollX=e.scrollX);var a=void 0;return a=t?$("#"+e.id).dataTable(r):$("#"+e.id).DataTable(r)}function a(e,t,r,a){$("#"+e+" tbody").off(t,r).on(t,r,a)}function n(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.bindTableEvent=a,t.getTableItem=n},141:function(e,t){"use strict";function r(e){for(var t=[],r={},a=0;a<e.length;a++)r[e[a]]||(t.push(e[a]),r[e[a]]=1);return t}function a(e){if(!isNaN(Number(e))&&Number(e)&&Number(e)>=0){for(var t=0,r=["B","KB","M","G","T"];Math.abs(e)>=1024&&(e/=1024,t++,4!==t););var a=Number(e).toFixed(2);return a+" "+r[t]}return"0B"}function n(e,t){if(!e)return"-";var r=0,a=0,n="";a=e.length;for(var d=0;d<a;d++){var i=e.charAt(d);if(r++,escape(i).length>4&&r++,n=n.concat(i),r>=t)return n=n.concat("...")}return r<t?e:void 0}function d(e,t){var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayUnique=r,t.unitTransform=a,t.cutStr=n,t.dateFormat=d},202:function(e,t){"use strict";function r(e){var t=$(e.parent).qtip({content:e.content||"",position:{my:"left center",at:"bottom right",target:$(e.parent)},style:{classes:"qtip-blue qtip-shadow"},show:{event:e.event||"mouseenter"}});return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},425:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),d=a(n),i=r(6),o=a(i),l=r(3),s=a(l),u=r(4),c=a(u),p=r(8),f=a(p),v=r(7),b=a(v),g=r(2),h=a(g),m=r(147),R=a(m),T=r(12),y=a(T),H=r(202),E=a(H),O=r(201),x=a(O),_=r(141),k=(0,d.default)("tr",{},void 0,(0,d.default)("th",{},void 0,"名称"),(0,d.default)("th",{},void 0,"描述"),(0,d.default)("th",{},void 0,"创建人"),(0,d.default)("th",{},void 0,"创建时间")),N=(0,d.default)("tr",{},void 0,(0,d.default)("th",{},void 0,"名称"),(0,d.default)("th",{},void 0,"描述"),(0,d.default)("th",{},void 0,"创建人"),(0,d.default)("th",{},void 0,"创建时间"),(0,d.default)("th",{},void 0,"操作")),w=(0,d.default)("button",{type:"submit",name:"createReport",className:"btn btn-primary"},void 0,"新建"),P=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.createTable=r.createTable.bind(r),r.addHandler=r.addHandler.bind(r),r.detailHandler=r.detailHandler.bind(r),r.analysisHandler=r.analysisHandler.bind(r),r.editHandler=r.editHandler.bind(r),r.removeHandler=r.removeHandler.bind(r),r.removeOKHandler=r.removeOKHandler.bind(r),r.clickOwnerHandler=r.clickOwnerHandler.bind(r),r.privilegeHandler=r.privilegeHandler.bind(r),r}return(0,b.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.readReport()}},{key:"componentDidUpdate",value:function(){this.createTable(this.props.report.reportsData.result.data),$('button[name = "createReport"]').on("click",this.addHandler)}},{key:"createTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};t.id="reportList",t.columns=[{data:"reportName",defaultContent:"-"},{data:"desc",defaultContent:"-"},{data:"owner",defaultContent:"-"},{data:"createTime",defaultContent:"-"},{data:"privilege",defaultContent:"-"}],t.order=[[3,"desc"]];var r=sessionStorage.getItem("userRolePermission");r.indexOf("REPORT_")!=-1&&(t.columnDefs=[{targets:0,render:function(e,t,r){var a=r.reportName||"",n='<span style="cursor: pointer;" title="'+a+'" > '+(0,_.cutStr)(a,20)+"</span> ";return n}},{targets:1,render:function(e,t,r){var a=r.desc||"",n='<span style="cursor: pointer;" title="'+a+'" > '+(0,_.cutStr)(a,40)+"</span> ";return n}},{targets:2,render:function(e,t,r){var a='<a href="javascript:void(0);" class="owner">'+r.owner+"</a> ";return a}},{targets:4,render:function(e,t,r){var a="";return r.privilege&&0!==r.privilege.REPORT.length?(r.privilege.REPORT.indexOf("分析")!=-1&&(a+="<a href='javascript:void(0);' class='reportAnalysis btn btn-default btn-xs'><i class='fa fa-search'></i> 分析</a> "),r.privilege.REPORT.indexOf("查看")!=-1&&(a+="<a href='javascript:void(0);'  class='reportDetail btn btn-default btn-xs'  ><i class='fa fa-file-text-o'></i> 详情</a> "),r.privilege.REPORT.indexOf("修改")!=-1&&(a+="<a href='javascript:void(0);' class='reportEdit btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),r.privilege.REPORT.indexOf("授权")!=-1&&(a+="<a href='javascript:void(0);' class='privilege btn btn-default btn-xs'><i class='fa fa-wrench'></i> 授权</a> "),r.privilege.REPORT.indexOf("删除")!=-1&&(a+="<a href='javascript:void(0);' class='reportRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeReport\"><i class='fa fa-trash-o'></i> 删除</a>")):a+="<span>  无操作权限<span/>",a}}]),t.data=e,(0,y.default)(t),(0,T.bindTableEvent)("reportList","click","a.reportDetail",this.detailHandler),(0,T.bindTableEvent)("reportList","click","a.reportAnalysis",this.analysisHandler),(0,T.bindTableEvent)("reportList","click","a.reportEdit",this.editHandler),(0,T.bindTableEvent)("reportList","click","a.reportRemove",this.removeHandler),(0,T.bindTableEvent)("reportList","click","a.owner",this.clickOwnerHandler),(0,T.bindTableEvent)("reportList","click","a.privilege",this.privilegeHandler)}},{key:"clickOwnerHandler",value:function(e){var t=x.default.userDetail($(e.currentTarget).text());t=t.result.detail;var r=(0,E.default)({parent:e.currentTarget,event:"click",content:"<dl><dt>用户名：</dt><dd>"+t.userName+"</dd></dl>\n            <dl><dt>姓名：</dt><dd>"+t.name+"</dd></dl>\n            </dl><dl><dt>部门：</dt><dd>"+t.department+"</dd></dl>\n            </dl><dl><dt>职位：</dt><dd>"+t.position+"</dd></dl>\n            </dl><dl><dt>电话：</dt><dd>"+t.phoneNo+"</dd></dl>\n            <dl><dt>邮箱：</dt><dd>"+t.email+"</dd></dl>"}),a=r.qtip("api");a.show()}},{key:"addHandler",value:function(){this.props.history.replace("/report/add")}},{key:"detailHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/report/detail/"+t.reportName)}},{key:"analysisHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/report/analysis/"+t.reportName)}},{key:"editHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/report/update/"+t.reportName)}},{key:"removeHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectReport(t),this.refs.delReport.setContent("您确定要删除报表："+t.reportName+"吗？")}},{key:"removeOKHandler",value:function(){var e=[];e.push(this.props.report.selectedRecord.reportName),this.props.delReport(e),$("#removeReport").modal("hide")}},{key:"privilegeHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectReport(t),this.props.history.replace("/report/accredit/"+t.reportName)}},{key:"render",value:function(){var e=k,t=sessionStorage.getItem("userRolePermission");t.indexOf("REPORT_")!=-1&&(e=N);var r="";return sessionStorage.getItem("userRolePermission").indexOf("REPORT_CREATE")!=-1&&(r=w),(0,d.default)("div",{id:"reportManage",className:"box box-primary"},void 0,(0,d.default)("div",{className:"row"},void 0,(0,d.default)("div",{className:"col-md-12"},void 0,(0,d.default)("div",{className:"box-header"},void 0,r),(0,d.default)("div",{className:"box-body"},void 0,(0,d.default)("table",{id:"reportList",className:"table table-striped table-bordered"},void 0,(0,d.default)("thead",{},void 0,e))))),h.default.createElement(R.default,{modalId:"removeReport",ref:"delReport",title:"删除报表",okHandler:this.removeOKHandler}))}}]),t}(g.Component);t.default=P}});