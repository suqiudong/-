webpackJsonp([50,51],{593:function(e,a,d){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var t=d(5),o=i(t),r=d(6),l=i(r),s=d(3),u=i(s),n=d(4),v=i(n),p=d(8),c=i(p),m=d(7),f=i(m),N=d(2),b=(i(N),d(10)),h=(0,o.default)("p",{},void 0,"上传状态：成功"),y=(0,o.default)("p",{},void 0,"安装状态：成功"),x=(0,o.default)("div",{className:"box-header with-border "},void 0,(0,o.default)("p",{className:"box-title"},void 0,"基本信息")),g=(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"driverNameDiv col-md-6 form-group"},void 0,(0,o.default)("label",{htmlFor:"driverName"},void 0,(0,o.default)("span",{className:"identify"},void 0,"* "),"驱动名 : "),(0,o.default)("span",{className:"messages"}),(0,o.default)("input",{type:"text",id:"driverName",name:"driverName",className:"form-control",placeholder:"驱动名唯一且格式必须为：字母+(字母、数字、下划线)"}))),w=(0,o.default)("label",{},void 0,"描述: "),k=(0,o.default)("span",{className:"messages"}),H=(0,o.default)("div",{className:"box-header with-border"},void 0,(0,o.default)("p",{className:"box-title"},void 0,"上传插件")),S=(0,o.default)("p",{className:"uploadfilename"}),D=(0,o.default)("i",{className:"fa fa-upload"}),_=(0,o.default)("div",{id:"upload"}),F=(0,o.default)("div",{id:"output"}),M=function(e){function a(e){(0,u.default)(this,a);var d=(0,c.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return d.returnHander=d.returnHander.bind(d),d.installHander=d.installHander.bind(d),d.inputName=d.inputName.bind(d),d}return(0,f.default)(a,e),(0,v.default)(a,[{key:"componentDidMount",value:function(){}},{key:"inputName",value:function(){var e=$("#driverName").val(),a=$("#description").val(),d=this;$("#upload").uploadFile({url:"/DriverManager/upload",maxFileCount:1,showDone:!1,showPreview:!1,dragDrop:!1,formData:{driverName:e,description:a},autoSubmit:!0,showProgress:!0,showFileCounter:!1,acceptFiles:"aplication/zip",fileName:"driverFile",uploadStr:"插件上传",abortStr:"移除",cancelStr:"取消",returnType:"json",extErrorStr:"文件上传错误，只接受扩展名为：*.zip 的文件",showQueueDiv:"output",onSuccess:function(e,a){$(".ajax-file-upload-container").hide(),0==a.code?((0,b.success)("上传成功！"),$("#output").empty(),$(".uploadbtn").hide(),$(".uploadfilename").append("上传文件名： "+e[0]),d.props.driverFileInfo(a)):"302"==a.code?((0,b.error)(a.msg),setTimeout(function(){sessionStorage.removeItem("XDataUserName"),sessionStorage.removeItem("userRolePermission"),window.location.replace("/")},1e3)):((0,b.error)(a.msg),$(".uploadbtn").show())},onError:function(){(0,b.error)("上传失败！"),$(".ajax-file-upload-container").hide(),$("#output").empty()}})}},{key:"uploadHandler",value:function(e){return e.stopPropagation(),""==$("#driverName").val().trim()?void(0,b.error)("请输入驱动名 ！"):/^[a-zA-Z][\w_]*$/.test($("#driverName").val())?void $("#upload input").click():void(0,b.error)("驱动名格式必须为：字母+(字母、数字、下划线) ！")}},{key:"returnHander",value:function(){this.props.history.replace("/driver")}},{key:"installHander",value:function(){var e=this.props.driverManage.fileInfo.result;this.props.driverInstall(e,this.returnHander.bind(this))}},{key:"render",value:function(){var e="",a=void 0,d=void 0;return 0==this.props.driverManage.fileInfo.code?($(".uploadStr").css("background","rgba(12, 11, 11, 0.07)"),e=(0,o.default)("div",{style:{fontSize:"16px"}},void 0,h,y),d="",a=(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"col-md-12"},void 0,(0,o.default)("div",{},void 0,(0,o.default)("button",{type:"submit",className:"btn btn-primary",style:{marginRight:"20px"},onClick:this.returnHander},void 0,"返回"))))):d=(0,o.default)("button",{type:"submit",className:"btn btn-primary",onClick:this.returnHander},void 0,"返回"),(0,o.default)("div",{id:"pluginAdd"},void 0,(0,o.default)("div",{className:"box box-primary"},void 0,x,(0,o.default)("div",{className:"box-body"},void 0,g,(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"descDiv col-md-8 form-group"},void 0,w,k,(0,o.default)("textarea",{style:{maxWidth:"1083px"},placeholder:"添加对该驱动的描述",name:"description",id:"description",className:"form-control"}))))),(0,o.default)("div",{className:"box box-primary"},void 0,(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"col-md-12"},void 0,H,(0,o.default)("div",{className:"box-body"},void 0,(0,o.default)("div",{className:"uploadStr",onClick:this.uploadHandler},void 0,(0,o.default)("div",{style:{paddingLeft:"15px"}},void 0,S,e),(0,o.default)("div",{className:"uploadbtn",onMouseOver:this.inputName,style:{marginTop:"-10px"}},void 0,D," 点击上传并安装插件"),_),F)))),a,(0,o.default)("div",{},void 0,d))}}]),a}(N.Component);a.default=M}});