webpackJsonp([33,51],{12:function(e,a){"use strict";function t(e,a){var t={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(t.scrollX=e.scrollX);var l=void 0;return l=a?$("#"+e.id).dataTable(t):$("#"+e.id).DataTable(t)}function l(e,a,t,l){$("#"+e+" tbody").off(a,t).on(a,t,l)}function r(e){var a=$("#"+e).DataTable().row($(this).parents("tr")).data();return a}Object.defineProperty(a,"__esModule",{value:!0}),a.default=t,a.bindTableEvent=l,a.getTableItem=r},629:function(e,a,t){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=t(5),o=l(r),d=t(6),i=l(d),n=t(3),s=l(n),u=t(4),c=l(u),f=t(8),v=l(f),m=t(7),p=l(m),b=t(2),h=l(b),g=t(12),R=l(g),y=t(147),H=l(y),_=(0,o.default)("button",{type:"submit",name:"createRole",className:"btn btn-primary"},void 0,"新建"),E=(0,o.default)("tr",{},void 0,(0,o.default)("th",{},void 0,"角色名称"),(0,o.default)("th",{},void 0,"描述"),(0,o.default)("th",{},void 0,"人数")),O=(0,o.default)("tr",{},void 0,(0,o.default)("th",{},void 0,"角色名称"),(0,o.default)("th",{},void 0,"描述"),(0,o.default)("th",{},void 0,"人数"),(0,o.default)("th",{},void 0,"操作")),L=function(e){function a(e){(0,s.default)(this,a);var t=(0,v.default)(this,(a.__proto__||(0,i.default)(a)).call(this,e));return t.editHandler=t.editHandler.bind(t),t.detailHandler=t.detailHandler.bind(t),t.deleteHandler=t.deleteHandler.bind(t),t.saveRoleCom=t.saveRoleCom.bind(t),t.deleteOKHandler=t.deleteOKHandler.bind(t),t.addHandler=t.addHandler.bind(t),t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"componentWillMount",value:function(){this.props.readRole()}},{key:"componentDidUpdate",value:function(){this.createTable(this.props.roleManage.roleManagesData.result.data),$('button[name = "createRole"]').on("click",this.addHandler)}},{key:"addHandler",value:function(){this.props.history.replace("/roleManage/create")}},{key:"saveRoleCom",value:function(e){var a=$("#roleList").DataTable().row($(e.currentTarget).parents("tr")).data();return this.props.selectRole(a),a}},{key:"editHandler",value:function(e){var a=this.saveRoleCom(e);this.props.history.replace("/roleManage/edit/"+a.roleName)}},{key:"detailHandler",value:function(e){var a=this.saveRoleCom(e);this.props.history.replace("/roleManage/detail/"+a.roleName)}},{key:"deleteHandler",value:function(e){var a=this.saveRoleCom(e);this.refs.delRole.setContent("您确定要删除角色："+a.roleName+" 吗？")}},{key:"returnHandler",value:function(){$("#removeRole").modal("hide"),this.props.history.replace("/roleManage")}},{key:"deleteOKHandler",value:function(){var e=[];e.push(this.props.roleManage.selectRole.roleName),this.props.deleteRole(e,this.returnHandler.bind(this))}},{key:"createTable",value:function(e){var a={};a.id="roleList",a.columns=[{data:"roleName"},{data:"desc"},{data:"memberNumber"},{data:"privilege"}];var t=sessionStorage.getItem("userRolePermission");t.indexOf("ROLE_")!=-1&&(a.columnDefs=[{targets:3,render:function(e,a,t){var l="";return t.privilege&&0!==t.privilege.ROLE.length?(t.privilege.ROLE.indexOf("查看")!=-1&&(l+="<a href='javascript:void(0);'  class='roleDetail btn btn-default btn-xs'  ><i class='fa fa-file-text-o'></i> 详情</a> "),t.privilege.ROLE.indexOf("修改")!=-1&&(l+="<a href='javascript:void(0);' class='roleEdit btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),t.privilege.ROLE.indexOf("删除")!=-1&&(l+="<a href='#' class='roleDelete btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeRole\"><i class='fa fa-trash-o'></i> 删除</a>")):l+="<span>  无操作权限<span/>",l}}]),a.data=[];for(var l=0;l<e.length;l++){var r={};r.roleName=e[l].roleName,r.desc=e[l].desc||"-",r.memberNumber=e[l].member.length,r.member=e[l].member,r.privilege=e[l].privilege,a.data.push(r)}a.order=[[0,"asc"]],(0,R.default)(a),(0,g.bindTableEvent)("roleList","click","a.roleDetail",this.detailHandler),(0,g.bindTableEvent)("roleList","click","a.roleEdit",this.editHandler),(0,g.bindTableEvent)("roleList","click","a.roleDelete",this.deleteHandler)}},{key:"render",value:function(){var e="";sessionStorage.getItem("userRolePermission").indexOf("ROLE_CREATE")!=-1&&(e=_);var a=E,t=sessionStorage.getItem("userRolePermission");return t.indexOf("ROLE_")!=-1&&(a=O),(0,o.default)("div",{id:"roleManage",className:"box box-primary"},void 0,(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"col-md-12"},void 0,(0,o.default)("div",{className:"box-header left"},void 0,e),(0,o.default)("div",{className:"box-body"},void 0,(0,o.default)("table",{id:"roleList",className:"table table-striped table-bordered"},void 0,(0,o.default)("thead",{},void 0,a))))),h.default.createElement(H.default,{modalId:"removeRole",ref:"delRole",title:"删除角色",okHandler:this.deleteOKHandler}))}}]),a}(b.Component);a.default=L}});