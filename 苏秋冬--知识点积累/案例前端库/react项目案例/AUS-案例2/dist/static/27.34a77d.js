webpackJsonp([27,51],{12:function(e,t){"use strict";function a(e,t){var a={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(a.scrollX=e.scrollX);var i=void 0;return i=t?$("#"+e.id).dataTable(a):$("#"+e.id).DataTable(a)}function i(e,t,a,i){$("#"+e+" tbody").off(t,a).on(t,a,i)}function n(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.bindTableEvent=i,t.getTableItem=n},141:function(e,t){"use strict";function a(e){for(var t=[],a={},i=0;i<e.length;i++)a[e[i]]||(t.push(e[i]),a[e[i]]=1);return t}function i(e){if(!isNaN(Number(e))&&Number(e)&&Number(e)>=0){for(var t=0,a=["B","KB","M","G","T"];Math.abs(e)>=1024&&(e/=1024,t++,4!==t););var i=Number(e).toFixed(2);return i+" "+a[t]}return"0B"}function n(e,t){if(!e)return"-";var a=0,i=0,n="";i=e.length;for(var l=0;l<i;l++){var r=e.charAt(l);if(a++,escape(r).length>4&&a++,n=n.concat(r),a>=t)return n=n.concat("...")}return a<t?e:void 0}function l(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayUnique=a,t.unitTransform=i,t.cutStr=n,t.dateFormat=l},610:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),l=i(n),r=a(6),u=i(r),d=a(3),o=i(d),s=a(4),p=i(s),g=a(8),f=i(g),v=a(7),c=i(v),m=a(2),h=i(m),b=a(147),N=i(b),U=a(12),R=i(U),y=a(10),H=a(141),O=void 0,P=(0,l.default)("p",{className:"users-list-date"},void 0,(0,l.default)("small",{},void 0," 强制更新：立即停止所有关联的作业（kill 进程），作业下线不再调度，并更新插件")),k=(0,l.default)("small",{className:"pull-left"},void 0,"安全更新："),L=(0,l.default)("small",{className:"pull-left"},void 0,(0,l.default)("p",{},void 0,"如果是周期调度作业则会在下调度之前Kill作业，然后下调度"),(0,l.default)("p",{},void 0,"如果是一次执行作业则不作处理")),T=(0,l.default)("tr",{},void 0,(0,l.default)("th",{},void 0,"插件名"),(0,l.default)("th",{},void 0,"包名称"),(0,l.default)("th",{},void 0,"所有者"),(0,l.default)("th",{},void 0,"安装时间"),(0,l.default)("th",{},void 0,"状态"),(0,l.default)("th",{},void 0,"版本号")),_=(0,l.default)("tr",{},void 0,(0,l.default)("th",{},void 0,"插件名"),(0,l.default)("th",{},void 0,"包名称"),(0,l.default)("th",{},void 0,"所有者"),(0,l.default)("th",{},void 0,"安装时间"),(0,l.default)("th",{},void 0,"状态"),(0,l.default)("th",{},void 0,"版本号"),(0,l.default)("th",{},void 0,"操作")),x=function(e){function t(e){(0,o.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.createPlugin=a.createPlugin.bind(a),a.pluginDetail=a.pluginDetail.bind(a),a.pluginUpdate=a.pluginUpdate.bind(a),a.pluginForceUpdateOKHandler=a.pluginForceUpdateOKHandler.bind(a),a.pluginSafeUpdateOKHandler=a.pluginSafeUpdateOKHandler.bind(a),a.removeHandler=a.removeHandler.bind(a),a.pluginForceRemoveOKHandler=a.pluginForceRemoveOKHandler.bind(a),a.pluginSafeRemoveOKHandler=a.pluginSafeRemoveOKHandler.bind(a),a.RemoveOKHandler=a.RemoveOKHandler.bind(a),a.privilegeHandler=a.privilegeHandler.bind(a),a.pluginUpdata=a.pluginUpdata.bind(a),a}return(0,c.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){this.props.readPluginList()}},{key:"componentDidUpdate",value:function(){this.createTable(this.props.pluginManage.pluginList.result.data)}},{key:"createPlugin",value:function(){this.props.pluginManage.fileInfo={},this.props.history.replace("/plugin/add")}},{key:"createTable",value:function(e){var t={};t.id="pluginList",t.columns=[{data:"pluginName",render:function(e,t,a,i){return e.length>20?"<span title="+e+">"+(0,H.cutStr)(e,20)+"...</span>":e},defaultContent:"-"},{data:"jarName",render:function(e,t,a,i){return e.length>20?"<span title="+e+">"+(0,H.cutStr)(e,20)+"...</span>":e},defaultContent:"-"},{data:"owner",defaultContent:"-"},{data:"time",defaultContent:"-"},{data:"status",defaultContent:"-"},{data:"version",defaultContent:"-"},{data:"privilege",defaultContent:"-"}];var a=sessionStorage.getItem("userRolePermission");a.indexOf("PLUGIN_QUERY")!=-1&&(t.columnDefs=[{targets:6,render:function(e,t,a){var i="";return 0!==a.privilege.PLUGIN.length?(a.privilege.PLUGIN.indexOf("查看")!=-1&&(i+="<a href='javascript:void(0);'  class='pluginDetail btn btn-default btn-xs'><i class='fa fa-file-text-o'></i> 详情</a> "),a.privilege.PLUGIN.indexOf("修改")!=-1&&(i+="<a href='javascript:void(0);' class='pluginUpdate btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 更新</a> "),a.privilege.PLUGIN.indexOf("授权")!=-1&&(i+="<a href='javascript:void(0);' class='privilege btn btn-default btn-xs'><i class='fa fa-wrench'></i> 授权</a> "),a.privilege.PLUGIN.indexOf("卸载")!=-1&&(i+="<a href='javascript:void(0);' class='pluginRemove btn btn-default btn-xs'><i class='fa fa-trash-o'></i> 卸载</a></div>")):i+="<span>  无操作权限<span/>",i}}]),t.data=e,(0,R.default)(t),(0,U.bindTableEvent)("pluginList","click","a.pluginRemove",this.removeHandler),(0,U.bindTableEvent)("pluginList","click","a.pluginDetail",this.pluginDetail),(0,U.bindTableEvent)("pluginList","click","a.pluginUpdate",this.pluginUpdate),(0,U.bindTableEvent)("pluginList","click","a.privilege",this.privilegeHandler)}},{key:"privilegeHandler",value:function(e){var t=this.selectPlugin(e);this.props.history.replace("/plugin/accredit/"+t.pluginName)}},{key:"selectPlugin",value:function(e){var t=$("#pluginList").DataTable().row($(e.currentTarget).parents("tr")).data();return this.props.saveSelectPlugin(t),t}},{key:"pluginDetail",value:function(e){var t=this.selectPlugin(e);this.props.history.replace("/plugin/detail/"+t.pluginName)}},{key:"removeHandler",value:function(e){var t=this.selectPlugin(e);this.props.isUsePlugin(t.pluginName),this.props.pluginManage.isUse.result?(0,y.error)("无法卸载"+t.pluginName+"插件,您的插件正在作业！"):($("#pluginRemove1").modal(),this.refs.pluginRemove1.setContent("您确定要卸载"+t.pluginName+"插件吗？"))}},{key:"pluginForceRemoveOKHandler",value:function(){var e={pluginName:this.props.pluginManage.pluginData.pluginName,opType:"FORCE"};this.props.pluginRemove(e),$("#pluginRemove").modal("hide"),this.props.readPluginList()}},{key:"pluginSafeRemoveOKHandler",value:function(){var e={pluginName:this.props.pluginManage.pluginData.pluginName,opType:"SAFE"};this.props.pluginRemove(e),$("#pluginRemove").modal("hide"),this.props.readPluginList()}},{key:"RemoveOKHandler",value:function(){var e={pluginName:this.props.pluginManage.pluginData.pluginName};this.props.pluginRemove(e),$("#pluginRemove1").modal("hide"),this.props.readPluginList()}},{key:"pluginUpdate",value:function(e){var t=this.selectPlugin(e);if(this.props.isUsePlugin(t.pluginName),this.props.pluginManage.isUse.result){O=t.pluginName,$("#pluginUpdate").modal();var a=(0,l.default)("div",{},void 0,(0,l.default)("p",{},void 0,"'检测到您的插件正在作业，您确定要更新' + ",t.pluginName," + '插件吗？'"),P,(0,l.default)("p",{className:"users-list-date",style:{overflow:"hidden"}},void 0,k,L));this.refs.pluginUpdate.setContent(a)}else this.props.history.replace("/plugin/update/"+t.pluginName)}},{key:"pluginForceUpdateOKHandler",value:function(){var e="FORCE";this.pluginUpdata(e)}},{key:"pluginSafeUpdateOKHandler",value:function(){var e="SAFE";this.pluginUpdata(e)}},{key:"pluginUpdata",value:function(e){this.props.pluginUpdateType(e),$("#pluginUpdate").removeClass("fade"),$("#pluginUpdate").modal("hide"),this.props.history.replace("/plugin/update/"+O)}},{key:"render",value:function(){var e=T,t=sessionStorage.getItem("userRolePermission");t.indexOf("PLUGIN_")!=-1&&(e=_);var a=void 0;return t.indexOf("PLUGIN_INSTALL")!=-1&&(a=(0,l.default)("button",{type:"submit",className:"btn btn-primary",onClick:this.createPlugin},void 0,"新建")),(0,l.default)("div",{id:"pluginManage",className:"box box-primary"},void 0,(0,l.default)("div",{className:"row"},void 0,(0,l.default)("div",{className:"col-md-12"},void 0,(0,l.default)("div",{className:"box-header",style:{float:"left"}},void 0,a),(0,l.default)("div",{className:"box-body"},void 0,(0,l.default)("table",{id:"pluginList",className:"table table-striped table-bordered"},void 0,(0,l.default)("thead",{},void 0,e))))),h.default.createElement(N.default,{modalId:"pluginUpdate",button:"threeButton",ref:"pluginUpdate",title:"插件更新",okBtn:"强制更新",safeokBtn:"安全更新",okHandler:this.pluginForceUpdateOKHandler,safeokHandler:this.pluginSafeUpdateOKHandler}),h.default.createElement(N.default,{modalId:"pluginRemove",button:"threeButton",ref:"pluginRemove",title:"插件删除",okBtn:"强制删除",safeokBtn:"安全删除",okHandler:this.pluginForceRemoveOKHandler,safeokHandler:this.pluginSafeRemoveOKHandler}),h.default.createElement(N.default,{modalId:"pluginRemove1",ref:"pluginRemove1",title:"插件删除",okHandler:this.RemoveOKHandler}))}}]),t}(m.Component);t.default=x}});