webpackJsonp([38,51],{12:function(e,t){"use strict";function a(e,t){var a={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(a.scrollX=e.scrollX);var r=void 0;return r=t?$("#"+e.id).dataTable(a):$("#"+e.id).DataTable(a)}function r(e,t,a,r){$("#"+e+" tbody").off(t,a).on(t,a,r)}function n(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.bindTableEvent=r,t.getTableItem=n},589:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(5),o=r(n),d=a(17),s=r(d),l=a(16),u=r(l),c=a(6),i=r(c),f=a(3),p=r(f),h=a(4),m=r(h),v=a(8),b=r(v),S=a(7),M=r(S),g=a(2),k=r(g),w=a(147),N=r(w),T=a(12),L=r(T),y=(0,o.default)("div",{className:"box-body"},void 0,(0,o.default)("table",{id:"dataSourceModelList",className:"table table-striped table-bordered"},void 0,(0,o.default)("thead",{},void 0,(0,o.default)("tr",{},void 0,(0,o.default)("th",{},void 0,"模型名称"),(0,o.default)("th",{},void 0,"同步状态"),(0,o.default)("th",{},void 0,"创建用户"),(0,o.default)("th",{},void 0,"创建时间"),(0,o.default)("th",{},void 0,"操作"))))),x=function(e){function t(e){(0,p.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.createTable=a.createTable,a.deletBut=a.deletBut.bind(a),a.addtable=a.addtable.bind(a),a.UpdateModel=a.UpdateModel.bind(a),a.okHandler=a.okHandler.bind(a),a.onSch=a.onSch.bind(a),a.offSch=a.offSch.bind(a),a.killCurrent=a.killCurrent.bind(a),a.runOnce=a.runOnce.bind(a),a.getList=a.getList.bind(a),a.isRunningBatch=a.isRunningBatch.bind(a),a.isOnSchBatch=a.isOnSchBatch.bind(a),a.state={Name:{modelName:""},arrName:{modelName:[]},schStatus:[],runStatus:[]},a}return(0,M.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){var e=this;(0,u.default)(s.default.mark(function t(){var a,r,n,o,d,l;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.ModelManagerList();case 2:e.props.dataSourceModel.modelList&&(a=e.props.dataSourceModel.modelList,r=[],n=[],o=[],d=!0,l=!0,a.map(function(e){d="ON"==e.schStatus,l="READY"!=e.runStatus,r.push(e.modelName),n.push(d),o.push(l)}),e.setState({arrName:{modelName:r}}),e.createTable(a));case 3:case"end":return t.stop()}},t,e)}))()}},{key:"componentDidUpdate",value:function(){}},{key:"createTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};t.id="dataSourceModelList",t.scrollX=!1,t.columns=[{data:"modelName",defaultContent:"-"},{data:"runStatus",render:function(e){return"READY"==e?"待同步":"同步中"},defaultContent:"-"},{data:"owner",defaultContent:"-"},{data:"createDate",defaultContent:"-"},{data:"schStatus",render:function(e,t,a){var r="",n="ON"==e?"下线":"上线",o="ON"==e?"offSch":"onSch",d="ON"==e?"fa-arrow-down":"fa-arrow-up",s="READY"==a.runStatus?"同步":"取消",l="READY"==a.runStatus?"runOnce":"killCurrent";return r+="<a href='javascript:void(0);'  class='"+o+" btn btn-default btn-xs'><i class='fa "+d+"'></i>"+n+"</a> ",r+="<a href='javascript:void(0);' class='UpdateModel btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i>更新</a> ",r+="<a href='javascript:void(0);' class='"+l+" btn btn-default btn-xs'><i class='fa fa-wrench'></i> "+s+"</a> ",r+="<a href='javascript:void(0);' class='dataRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeModel\"><i class='fa fa-trash-o'></i> 删除</a> "},defaultContent:"-"}],t.order=[[4,"desc"]],t.data=e,(0,L.default)(t),(0,T.bindTableEvent)("dataSourceModelList","click","a.onSch",this.onSch),(0,T.bindTableEvent)("dataSourceModelList","click","a.offSch",this.offSch),(0,T.bindTableEvent)("dataSourceModelList","click","a.UpdateModel",this.UpdateModel),(0,T.bindTableEvent)("dataSourceModelList","click","a.dataRemove",this.deletBut),(0,T.bindTableEvent)("dataSourceModelList","click","a.runOnce",this.runOnce),(0,T.bindTableEvent)("dataSourceModelList","click","a.killCurrent",this.killCurrent)}},{key:"deletBut",value:function(e){var t=$("#dataSourceModelList").DataTable().row($(e.currentTarget).parents("tr")).data();this.setState({Name:{modelName:t.modelName}}),this.refs.deleteModel.setContent("您确定要删除数据模型："+t.modelName+"吗？")}},{key:"addtable",value:function(){this.props.history.replace("/dataSourceModel/add")}},{key:"UpdateModel",value:function(e){e.stopPropagation();var t=$("#dataSourceModelList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/dataSourceModel/Update/"+t.modelName)}},{key:"okHandler",value:function(){var e=this;this.props.deleteModel(this.state.Name),$("#removeModel").modal("hide"),setTimeout(function(){e.props.history.replace("/dataSourceModel")},3e3)}},{key:"onSch",value:function(e){var t=this,a=$("#dataSourceModelList").DataTable().row($(e.currentTarget).parents("tr")).data(),r={modeName:a.modelName};(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.onSch(r);case 2:"0"==t.props.dataSourceModel.schStatus.code&&t.getList();case 3:case"end":return e.stop()}},e,t)}))()}},{key:"offSch",value:function(e){var t=this,a=$("#dataSourceModelList").DataTable().row($(e.currentTarget).parents("tr")).data(),r={modeName:a.modelName};(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.offSch(r);case 2:"0"==t.props.dataSourceModel.schStatus.code&&t.getList();case 3:case"end":return e.stop()}},e,t)}))()}},{key:"killCurrent",value:function(e){var t=this,a=$("#dataSourceModelList").DataTable().row($(e.currentTarget).parents("tr")).data(),r={modeName:a.modelName};(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.killCurrent(r);case 2:"0"==t.props.dataSourceModel.runStatus.code&&t.getList();case 3:case"end":return e.stop()}},e,t)}))()}},{key:"runOnce",value:function(e){var t=this,a=$("#dataSourceModelList").DataTable().row($(e.currentTarget).parents("tr")).data(),r={modeName:a.modelName};(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.runOnce(r);case 2:"0"==t.props.dataSourceModel.runStatus.code&&t.getList();case 3:case"end":return e.stop()}},e,t)}))()}},{key:"getList",value:function(){var e=this;(0,u.default)(s.default.mark(function t(){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.ModelManagerList();case 2:e.props.dataSourceModel.modelList[0]&&(a=e.props.dataSourceModel.modelList,e.createTable(a));case 3:case"end":return t.stop()}},t,e)}))()}},{key:"isRunningBatch",value:function(e,t){var a=this;(0,u.default)(s.default.mark(function r(){return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.props.isRunningBatch(t);case 2:a.props.dataSourceModel.getRuning.result?e.html('<i class="fa fa-wrench"></i>取消').addClass("killCurrent").removeClass("runOnce"):e.html('<i class="fa fa-wrench"></i>同步').addClass("runOnce").removeClass("killCurrent");case 3:case"end":return r.stop()}},r,a)}))()}},{key:"isOnSchBatch",value:function(e,t){var a=this;(0,u.default)(s.default.mark(function r(){return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.props.isOnSchBatch(t);case 2:a.props.dataSourceModel.sch.result?e.html('<i class="fa fa-arrow-down"></i>下线').addClass("offSch").removeClass("onSch"):e.html('<i class="fa fa-arrow-up"></i>上线').addClass("onSch").removeClass("offSch");case 3:case"end":return r.stop()}},r,a)}))()}},{key:"render",value:function(){return(0,o.default)("div",{id:"dataSourceModel",className:"box box-primary"},void 0,(0,o.default)("div",{className:"row"},void 0,(0,o.default)("div",{className:"col-md-12"},void 0,(0,o.default)("div",{className:"box-header",style:{float:"left"}},void 0,(0,o.default)("button",{type:"submit",name:"createDataScource",className:"btn btn-primary",onClick:this.addtable},void 0,"新建")),y)),k.default.createElement(N.default,{modalId:"removeModel",ref:"deleteModel",title:"删除数据模型",okHandler:this.okHandler}))}}]),t}(g.Component);t.default=x}});