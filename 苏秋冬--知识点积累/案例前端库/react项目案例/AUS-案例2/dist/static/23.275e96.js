webpackJsonp([23,51],{12:function(e,a){"use strict";function t(e,a){var t={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(t.scrollX=e.scrollX);var r=void 0;return r=a?$("#"+e.id).dataTable(t):$("#"+e.id).DataTable(t)}function r(e,a,t,r){$("#"+e+" tbody").off(a,t).on(a,t,r)}function d(e){var a=$("#"+e).DataTable().row($(this).parents("tr")).data();return a}Object.defineProperty(a,"__esModule",{value:!0}),a.default=t,a.bindTableEvent=r,a.getTableItem=d},141:function(e,a){"use strict";function t(e){for(var a=[],t={},r=0;r<e.length;r++)t[e[r]]||(a.push(e[r]),t[e[r]]=1);return a}function r(e){if(!isNaN(Number(e))&&Number(e)&&Number(e)>=0){for(var a=0,t=["B","KB","M","G","T"];Math.abs(e)>=1024&&(e/=1024,a++,4!==a););var r=Number(e).toFixed(2);return r+" "+t[a]}return"0B"}function d(e,a){if(!e)return"-";var t=0,r=0,d="";r=e.length;for(var n=0;n<r;n++){var i=e.charAt(n);if(t++,escape(i).length>4&&t++,d=d.concat(i),t>=a)return d=d.concat("...")}return t<a?e:void 0}function n(e,a){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in t)new RegExp("("+r+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return a}Object.defineProperty(a,"__esModule",{value:!0}),a.arrayUnique=t,a.unitTransform=r,a.cutStr=d,a.dateFormat=n},202:function(e,a){"use strict";function t(e){var a=$(e.parent).qtip({content:e.content||"",position:{my:"left center",at:"bottom right",target:$(e.parent)},style:{classes:"qtip-blue qtip-shadow"},show:{event:e.event||"mouseenter"}});return a}Object.defineProperty(a,"__esModule",{value:!0}),a.default=t},576:function(e,a,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var d=t(5),n=r(d),i=t(6),s=r(i),o=t(3),l=r(o),u=t(4),c=r(u),f=t(8),b=r(f),h=t(7),v=r(h),p=t(2),g=r(p),m=t(147),k=r(m),T=t(202),H=r(T),D=t(141),L=t(12),y=r(L),O=t(201),N=r(O),x=t(284),A=r(x),R="",_=(0,n.default)("tr",{},void 0,(0,n.default)("th",{},void 0,"名称"),(0,n.default)("th",{},void 0,"描述"),(0,n.default)("th",{},void 0,"创建人"),(0,n.default)("th",{},void 0,"创建时间")),w=(0,n.default)("tr",{},void 0,(0,n.default)("th",{},void 0,"名称"),(0,n.default)("th",{},void 0,"描述"),(0,n.default)("th",{},void 0,"创建人"),(0,n.default)("th",{},void 0,"创建时间"),(0,n.default)("th",{},void 0,"操作")),E=(0,n.default)("button",{type:"submit",name:"createDashboard",className:"btn btn-primary"},void 0,"新建"),S=function(e){function a(e){(0,l.default)(this,a);var t=(0,b.default)(this,(a.__proto__||(0,s.default)(a)).call(this,e));return t.createTable=t.createTable.bind(t),t.addHandler=t.addHandler.bind(t),t.detailHandler=t.detailHandler.bind(t),t.editHandler=t.editHandler.bind(t),t.analysisHandler=t.analysisHandler.bind(t),t.removeHandler=t.removeHandler.bind(t),t.removeOKHandler=t.removeOKHandler.bind(t),t.clickOwnerHandler=t.clickOwnerHandler.bind(t),t.saveToQuickLinkHandler=t.saveToQuickLinkHandler.bind(t),t.saveToQuickLinkOKHandler=t.saveToQuickLinkOKHandler.bind(t),t.privilegeHandler=t.privilegeHandler.bind(t),t}return(0,v.default)(a,e),(0,c.default)(a,[{key:"componentWillMount",value:function(){this.props.readDashboard(),R=A.default.getQuickLinkInfo()}},{key:"componentDidUpdate",value:function(){this.createTable(this.props.dashboard.dashboardData.result.data),$('button[name = "createDashboard"]').on("click",this.addHandler)}},{key:"createTable",value:function(e){var a={};a.id="dashboardList",a.columns=[{data:"dashboardName",defaultContent:"-"},{data:"desc",defaultContent:"-"},{data:"owner",defaultContent:"-"},{data:"createTime",defaultContent:"-"},{data:"privilege",defaultContent:"无任何权限"}],a.order=[[3,"desc"]];var t=sessionStorage.getItem("userRolePermission");t.indexOf("DASHBOARD_")!=-1&&(a.columnDefs=[{targets:0,render:function(e,a,t){var r=t.dashboardName||"",d='<span style="cursor: pointer;" title="'+r+'" > '+(0,D.cutStr)(r,20)+"</span> ";return d}},{targets:1,render:function(e,a,t){var r=t.desc||"",d='<span style="cursor: pointer;" title="'+r+'" > '+(0,D.cutStr)(r,40)+"</span> ";return d}},{targets:2,render:function(e,a,t){var r='<a href="javascript:void(0);" class="owner">'+t.owner+"</a> ";return r}},{targets:4,render:function(e,a,t){var r="",d=sessionStorage.getItem("XDataUserName");0!==t.privilege.DASHBOARD.length?(t.privilege.DASHBOARD.indexOf("分析")!=-1&&(r+="<a href='javascript:void(0);'  class='dashboardAnalysis btn btn-default btn-xs'  ><i class='fa fa-search'></i> 分析</a> "),t.privilege.DASHBOARD.indexOf("查看")!=-1&&(r+="<a href='javascript:void(0);' class='dashboardDetail btn btn-default btn-xs'><i class='fa fa-file-text-o'></i> 详情</a> "),t.privilege.DASHBOARD.indexOf("修改")!=-1&&(r+="<a href='javascript:void(0);' class='dashboardEdit btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),t.privilege.DASHBOARD.indexOf("删除")!=-1&&(r+="<a href='javascript:void(0);' class='dashboardRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeDashboard\"><i class='fa fa-trash-o'></i> 删除</a> "),t.privilege.DASHBOARD.indexOf("授权")!=-1&&(r+="<a href='javascript:void(0);' class='privilege btn btn-default btn-xs'><i class='fa fa-wrench'></i> 授权</a> ")):r+="<span>  无操作权限<span/>";for(var n=R.quickLink.split(";"),i=0,s=0;s<n.length;s++)t.dashboardName!=n[s]&&i++;return i===n.length&&t.owner===d&&(r+="<a href='javascript:void(0);' class='addToQuickLink btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#saveToQuickLink\"><i class='fa fa-star-o'></i> 添加导航</a> "),r}}]),a.data=e,(0,y.default)(a),(0,L.bindTableEvent)("dashboardList","click","a.dashboardAnalysis",this.analysisHandler),(0,L.bindTableEvent)("dashboardList","click","a.dashboardDetail",this.detailHandler),(0,L.bindTableEvent)("dashboardList","click","a.dashboardEdit",this.editHandler),(0,L.bindTableEvent)("dashboardList","click","a.dashboardRemove",this.removeHandler),(0,L.bindTableEvent)("dashboardList","click","a.addToQuickLink",this.saveToQuickLinkHandler),(0,L.bindTableEvent)("dashboardList","click","a.owner",this.clickOwnerHandler),(0,L.bindTableEvent)("dashboardList","click","a.privilege",this.privilegeHandler)}},{key:"saveToQuickLinkHandler",value:function(e){var a=$("#dashboardList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDashboard(a),this.refs.saveToQuickLink.setContent("您确定要添加仪表板："+a.dashboardName+"到快速导航吗？")}},{key:"saveToQuickLinkOKHandler",value:function(){var e=this.props.dashboard.selectedRecord.dashboardName;R.quickLink=R.quickLink+e+";",this.props.setQuickLinkInfo(R),$("#saveToQuickLink").modal("hide")}},{key:"clickOwnerHandler",value:function(e){var a=N.default.userDetail($(e.currentTarget).text());a=a.result.detail;var t=(0,H.default)({parent:e.currentTarget,event:"click",content:"<dl><dt>用户名：</dt><dd>"+a.userName+"</dd></dl>\n            <dl><dt>姓名：</dt><dd>"+a.name+"</dd></dl>\n            </dl><dl><dt>部门：</dt><dd>"+a.department+"</dd></dl>\n            </dl><dl><dt>职位：</dt><dd>"+a.position+"</dd></dl>\n            </dl><dl><dt>电话：</dt><dd>"+a.phoneNo+"</dd></dl>\n            <dl><dt>邮箱：</dt><dd>"+a.email+"</dd></dl>"}),r=t.qtip("api");r.show()}},{key:"analysisHandler",value:function(e){var a=$("#dashboardList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/dashboard/analysis/"+a.dashboardName)}},{key:"addHandler",value:function(){this.props.history.replace("/dashboard/add")}},{key:"privilegeHandler",value:function(e){var a=$("#dashboardList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDashboard(a),this.props.history.replace("/dashboard/accredit/"+a.dashboardName)}},{key:"detailHandler",value:function(e){var a=$("#dashboardList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/dashboard/detail/"+a.dashboardName)}},{key:"editHandler",value:function(e){var a=$("#dashboardList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/dashboard/update/"+a.dashboardName)}},{key:"removeHandler",value:function(e){var a=$("#dashboardList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDashboard(a),this.refs.delDashboard.setContent("您确定要删除仪表板："+a.dashboardName+"吗？")}},{key:"removeOKHandler",value:function(){var e=[],a=this.props.dashboard.selectedRecord.dashboardName;e.push(a),this.props.delDashboard(e);var t=A.default.getQuickLinkInfo();if(t.quickLink.indexOf(a+";")!=-1){for(var r=t.quickLink.split(";"),d="",n=0;n<r.length;n++)""!=r[n]&&r[n]!=a&&(d=d+r[n]+";");t.quickLink=d,this.props.setQuickLinkInfo(t)}$("#removeDashboard").modal("hide")}},{key:"render",value:function(){var e=_,a=sessionStorage.getItem("userRolePermission");a.indexOf("DASHBOARD_")!=-1&&(e=w);var t="";return sessionStorage.getItem("userRolePermission").indexOf("DASHBOARD_CREATE")!=-1&&(t=E),(0,n.default)("div",{id:"dashboardManage",className:"box box-primary"},void 0,(0,n.default)("div",{className:"row"},void 0,(0,n.default)("div",{className:"col-md-12"},void 0,(0,n.default)("div",{className:"box-header"},void 0,t),(0,n.default)("div",{className:"box-body"},void 0,(0,n.default)("table",{id:"dashboardList",className:"table table-striped table-bordered"},void 0,(0,n.default)("thead",{},void 0,e))))),g.default.createElement(k.default,{modalId:"removeDashboard",ref:"delDashboard",title:"删除仪表板",okHandler:this.removeOKHandler}),g.default.createElement(k.default,{modalId:"saveToQuickLink",ref:"saveToQuickLink",title:"添加快速导航",okHandler:this.saveToQuickLinkOKHandler}))}}]),a}(p.Component);a.default=S}});