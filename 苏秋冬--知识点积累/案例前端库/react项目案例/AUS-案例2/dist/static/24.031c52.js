webpackJsonp([24,51],{12:function(e,a){"use strict";function t(e,a){var t={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(t.scrollX=e.scrollX);var r=void 0;return r=a?$("#"+e.id).dataTable(t):$("#"+e.id).DataTable(t)}function r(e,a,t,r){$("#"+e+" tbody").off(a,t).on(a,t,r)}function o(e){var a=$("#"+e).DataTable().row($(this).parents("tr")).data();return a}Object.defineProperty(a,"__esModule",{value:!0}),a.default=t,a.bindTableEvent=r,a.getTableItem=o},166:function(e,a){"use strict";function t(e,a){return e<<a|e>>>32-a}function r(e){return(255&A[e>>>24&255])<<24|(255&A[e>>>16&255])<<16|(255&A[e>>>8&255])<<8|255&A[255&e]}function o(e){return e^t(e,2)^t(e,10)^t(e,18)^t(e,24)}function n(e){return e^t(e,13)^t(e,23)}function s(e,a,t){for(var n,s,i=new Array(4),d=new Array(4),l=0;l<4;l++)d[0]=255&e[0+4*l],d[1]=255&e[1+4*l],d[2]=255&e[2+4*l],d[3]=255&e[3+4*l],i[l]=d[0]<<24|d[1]<<16|d[2]<<8|d[3];for(n=0;n<32;n+=4)s=i[1]^i[2]^i[3]^t[n+0],s=r(s),i[0]=i[0]^o(s),s=i[2]^i[3]^i[0]^t[n+1],s=r(s),i[1]=i[1]^o(s),s=i[3]^i[0]^i[1]^t[n+2],s=r(s),i[2]=i[2]^o(s),s=i[0]^i[1]^i[2]^t[n+3],s=r(s),i[3]=i[3]^o(s);for(var u=0;u<16;u+=4)a[u]=i[3-u/4]>>>24&255,a[u+1]=i[3-u/4]>>>16&255,a[u+2]=i[3-u/4]>>>8&255,a[u+3]=255&i[3-u/4]}function i(e,a,t){for(var o,s,i=new Array(4),d=new Array(4),l=0;l<4;l++)d[0]=255&e[0+4*l],d[1]=255&e[1+4*l],d[2]=255&e[2+4*l],d[3]=255&e[3+4*l],i[l]=d[0]<<24|d[1]<<16|d[2]<<8|d[3];for(i[0]^=2746333894,i[1]^=1453994832,i[2]^=1736282519,i[3]^=2993693404,o=0;o<32;o+=4)s=i[1]^i[2]^i[3]^k[o+0],s=r(s),a[o+0]=i[0]^=n(s),s=i[2]^i[3]^i[0]^k[o+1],s=r(s),a[o+1]=i[1]^=n(s),s=i[3]^i[0]^i[1]^k[o+2],s=r(s),a[o+2]=i[2]^=n(s),s=i[0]^i[1]^i[2]^k[o+3],s=r(s),a[o+3]=i[3]^=n(s);if(t==w)for(o=0;o<16;o++)s=a[o],a[o]=a[31-o],a[31-o]=s}function d(e,a,t,r,o){var n=0,d=new Array(x);i(t,d,o);for(var c=new Array(16),f=new Array(16);a>=R;)c=l(e,n,n+16),s(c,f,d),u(f,0,r,n,R),a-=R,n+=R;return 0}function l(e,a,t){for(var r=new Array(16),o=0,n=a;n<t;n++)r[o]=e[n],o++;return r}function u(e,a,t,r,o){for(var n=0;n<o;n++)t[r+n]=e[n]}function c(e){var a=" ",t=0;e.length>=2&&254==e[0]&&255==e[1]&&(t=2);for(var r=t;r<e.length;r+=2){var o=e[r+1]+(e[r]<<8);isNaN(o)||(a+=String.fromCharCode(o))}return a}function f(e){var a=[];if(null==e||" "==e)return a;a.push(254),a.push(255);for(var t=0;t<e.length;t++){var r=e.charCodeAt(t).toString(16);1==r.length?r="000 "+r:2==r.length?r="00 "+r:3==r.length&&(r="0 "+r);var o=parseInt(r.substring(2),16),n=parseInt(r.substring(0,2),16);a.push(n),a.push(o)}return a}function m(e,a){return D=new Array(16),d(e,16,a,D,N),D}function v(e,a){return $=new Array(16),d(e,16,a,$,w),$}function p(e,a){for(var t=new Array(e.length),r=0,o=e.length;r+16<=o;){for(var n=new Array(16),s=0;s<16;s++)n[s]=e[s+r];for(var i=m(n,a),d=0;d<i.length;d++)t[r+d]=i[d];r+=16}return t}function h(e,a){for(var t=new Array(e.length),r=0,o=e.length;r+16<=o;){for(var n=new Array(16),s=0;s<16;s++)n[s]=e[r+s];for(var i=v(n,a),d=0;d<i.length;d++)t[r+d]=i[d];r+=16}return t}function g(e,a){var t=new Array(e.length);return t=h(e,a),t=c(t)}function b(e,a){if(null==e||" "==e)return" ";for(var t=f(e),r=t.length%16;r<16;r++)e+=" ";var o=f(e);return p(o,S(a))}function y(e,a){var t=" ";if("string"==typeof e){if(" "==e)return" ";for(var r=e.split(", "),o=new Array(r.length),n=0;n<r.length;n++)o[n]=parseInt(r[n],10);o=h(o,S(a)),o=c(o),t=o}else t=g(e,S(a));return t=t.replace(/(\s*$)/g," ")}function S(e){for(var a=new Array(e.length/2),t=0;t<e.length/2;t++)if(a[t]="0x"+e.substr(2*t,2),a[t]<0)return a[0]=-1,a;return a}Object.defineProperty(a,"__esModule",{value:!0});var N=1,w=0,x=32,R=16,A=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],k=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257],D=new Array(16),$=new Array(16);a.encodeSMS4=b,a.decodeBySMS4=y},283:function(e,a,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=t(5),n=r(o),s=t(6),i=r(s),d=t(3),l=r(d),u=t(4),c=r(u),f=t(8),m=r(f),v=t(7),p=r(v),h=t(2),g=(r(h),void 0),b=(0,n.default)("span",{className:"sr-only"},void 0,"ͬ����"),y=function(e){function a(e){(0,l.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,i.default)(a)).call(this,e));return t.RefreshHide=t.RefreshHide.bind(t),t.RefreshShow=t.RefreshShow.bind(t),t.state={width:60},t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"RefreshHide",value:function(){$(" #Refresh-model").modal("hide"),clearInterval(g)}},{key:"RefreshShow",value:function(){var e=this,a=60;$(" #Refresh-model").modal(),clearInterval(g),g=setInterval(function(){a>=100&&(a=0),a+=5,e.setState({width:a})},80)}},{key:"render",value:function(){return(0,n.default)("div",{className:"modal fade",id:"Refresh-model",role:"dialog","aria-labelledby":"myModalLabel"},void 0,(0,n.default)("div",{className:"modal-dialog Refresh-dialog"},void 0,(0,n.default)("div",{className:"modal-content Refresh-content"},void 0,(0,n.default)("div",{className:"progress progress-striped active"},void 0,(0,n.default)("div",{className:"progress-bar progress-bar-success",role:"progressbar","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100",style:{width:this.state.width+"%"}},void 0),b))))}}]),a}(h.Component);a.default=y},588:function(e,a,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var o=t(5),n=r(o),s=t(17),i=r(s),d=t(16),l=r(d),u=t(6),c=r(u),f=t(3),m=r(f),v=t(4),p=r(v),h=t(8),g=r(h),b=t(7),y=r(b),S=t(2),N=r(S),w=t(149),x=t(12),R=r(x),A=t(10),k=t(166),D=t(283),E=r(D),C="2C023A86BD32812A4C180A7152EEBF0A",T=!1,_=(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,(0,n.default)("label",{htmlFor:"dataSourceName"},void 0,"数据源名称 : "),(0,n.default)("span",{className:"messages"}),(0,n.default)("input",{type:"text",id:"dataSourceName",name:"dataSourceName",className:"form-control",readOnly:"readonly"})),L=(0,n.default)("div",{className:"dataSourceNameDiv form-group col-md-12"},void 0,(0,n.default)("div",{className:"input-name"},void 0,(0,n.default)("label",{htmlFor:"description",className:"description"},void 0,"描述："),(0,n.default)("input",{type:"text",name:"description",id:"description",className:"form-control"}))),U=(0,n.default)("label",{htmlFor:"connectionConfig.url"},void 0,"URL : "),F=(0,n.default)("span",{className:"messages"}),M=(0,n.default)("label",{htmlFor:"connectionConfig.user"},void 0,"用户名 : "),I=(0,n.default)("span",{className:"messages"}),P=(0,n.default)("label",{htmlFor:"connectionConfig.pwd"},void 0,"密码 : "),O=(0,n.default)("span",{className:"messages"}),B=(0,n.default)("label",{htmlFor:"connectionConfig.hive.metastore.uri"},void 0,"是否启用kerberos认证 : "),X=(0,n.default)("span",{className:"messages"}),H=(0,n.default)("option",{value:"NONE"},void 0,"NONE"),j=(0,n.default)("option",{value:"KERBEROS"},void 0,"KERBEROS"),V=(0,n.default)("input",{type:"hidden",id:"metastore",name:"connectionConfig.hive.metastore.uri"}),W=(0,n.default)("label",{htmlFor:"connectionConfig.['hive.hdfs.authentication.type']"},void 0,"认证主体 : "),K=(0,n.default)("span",{className:"messages"}),J=(0,n.default)("div",{id:"pluginAdd"},void 0,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,(0,n.default)("label",{htmlFor:"keytab"},void 0,"上传keytab文件"),(0,n.default)("input",{type:"file",name:"keytab",id:"keytab"}))),Z=(0,n.default)("div",{className:"box-header with-border"},void 0,(0,n.default)("p",{className:"box-title"},void 0,"配置信息")),q=(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,(0,n.default)("label",{htmlFor:"dataSourceType"},void 0,"数据源 : "),(0,n.default)("span",{className:"messages"}),(0,n.default)("input",{type:"text",id:"dataSourceType",name:"dataSourceType",className:"form-control",readOnly:"readonly"})),z=(0,n.default)("div",{className:"box-header with-border"},void 0,(0,n.default)("p",{className:"box-title"},void 0,"表信息")),G=(0,n.default)("label",{htmlFor:"datasetName"}),Q=(0,n.default)("span",{className:"messages"}),Y=(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,(0,n.default)("label",{htmlFor:"dataSoucerTime"},void 0,"上传同步时间 : "),(0,n.default)("span",{className:"messages"}),(0,n.default)("input",{type:"text",id:"dataSoucerTime",name:"dataSoucerTime",className:"form-control",disabled:!0})),ee=(0,n.default)("button",{name:"sync",className:"btn btn-primary",disabled:"true"},void 0,"同步信息列表"),ae=function(e){function a(e){(0,m.default)(this,a);var t=(0,g.default)(this,(a.__proto__||(0,c.default)(a)).call(this,e));return t.dataSourcesWitching=t.dataSourcesWitching.bind(t),t.kerberos=t.kerberos.bind(t),t.createTable=t.createTable.bind(t),t.isExistPassword=t.isExistPassword.bind(t),t.isExistUserName=t.isExistUserName.bind(t),t.isExistURL=t.isExistURL.bind(t),t.isExistAuthentication=t.isExistAuthentication.bind(t),t.isExistInput=t.isExistInput.bind(t),t.FromData=t.FromData.bind(t),t.infoData=t.infoData.bind(t),t.infoTest=t.infoTest.bind(t),t.sync=t.sync.bind(t),t.cancel=t.cancel.bind(t),t.state={kerberos:"block"},t}return(0,y.default)(a,e),(0,p.default)(a,[{key:"componentWillMount",value:function(){var e={dataSourceName:this.props.params.dataSourceName,offset:1,num:1e4,tableNameFilter:""};this.props.getDataSource(e)}},{key:"componentDidUpdate",value:function(){$(" #FormData").attr("enctype","multipart/form-data");var e=this.props.dataSourceConf.dataSourceDetail,a=e.schemaModule;$(" #description").val(e.description.trim()),$(" #dataSourceType").val(e.dataSourceType.trim()),$(" #dataSourceName").val(e.dataSourceName.trim()),$(" #visable").val(e),$(" #dataSourceUser").val((0,k.decodeBySMS4)(e.connectionConfig.user.split(","),C).trim()),$(" #dataSourceURL").val((0,k.decodeBySMS4)(e.connectionConfig.url.split(","),C).trim()),$(" #dataSourcePassword").val((0,k.decodeBySMS4)(e.connectionConfig.pwd.split(","),C).trim()),$(" #dataSoucerTime").val(e.createTime),$(' #kerberos option[value= "'+e.connectionConfig["hive.hdfs.authentication.type"]+'" ] ').attr("selected",!0),$(" #dataAuthentication").val(e.connectionConfig["hive.hdfs.ausmpp.principal"]);var t=[];for(var r in a)for(var o in a[r])t.push({tableName:r+"."+a[r][o].tableName});this.createTable(t)}},{key:"dataSourcesWitching",value:function(){var e=$("#dataSourceWitch").val();this.setState({witch:e})}},{key:"kerberos",value:function(){"NONE"==$(" #kerberos").val()?this.setState({kerberos:"none"}):this.setState({kerberos:"block"})}},{key:"createTable",value:function(e){var a={};a.id="dataSoucerList",a.scrollX=!1,a.searching=!1,a.columns=[{data:"tableName",defaultContent:"-"}],a.order=[[0,"desc"]],a.data=e,(0,R.default)(a)}},{key:"isExistPassword",value:function(){var e={password:{presence:{message:"请输入密码"},length:{maximum:12,message:"不能超过12个字符"}}};(0,w.baseValidate)($("#dataSourcePassword").parent(),e)}},{key:"isExistUserName",value:function(){var e={userName:{presence:{message:"请输入用户名"},length:{maximum:12,message:"不能超过12个字符"}}};(0,w.baseValidate)($("#dataSourceUser").parent(),e)}},{key:"isExistURL",value:function(){var e={dataURL:{presence:{message:"请输入数据源名"},length:{maximum:30,message:"不能超过30个字符"}}};(0,w.baseValidate)($("#dataSourceURL").parent(),e)}},{key:"isExistAuthentication",value:function(){var e={Authentication:{format:{pattern:"^([A-Z]|[a-z]|[0-9]){6,12}",message:"请输入正确的URL"},length:{maximum:30,message:"不能超过30个字符"}}};(0,w.baseValidate)($("#dataAuthentication").parent(),e)}},{key:"isExistInput",value:function(){if($("span.messages").find("p").length>0)return(0,A.error)("输入有异常，请检查后重新提交！"),void(T=!1);var e={Authentication:{presence:{message:"请输入认证信息"}},password:{presence:{message:"请输入密码"}},userName:{presence:{message:"请输入名称"}},dataURL:{presence:{message:"请输入URL"}}};(0,w.baseValidate)($("#dataSourceConfAdd"),e);var a=function(){for(var e=0;e<$("span.messages").length;e++){if($("span.messages").eq(e).html().length>0)return void(T=!1);T=!0}return T};return a(),T}},{key:"FromData",value:function(e,a,t,r){var o=this;if(this.isExistInput()){var n=$(" #dataSourceURL").val(),s=$(" #dataSourceUser").val(),i=$(" #dataSourcePassword").val();$(" #dataSourcePassword").val((0,k.encodeSMS4)(i,C)),$(" #dataSourceURL").val((0,k.encodeSMS4)(n,C)),$(" #dataSourceUser").val((0,k.encodeSMS4)(s,C)),this.refs.Refresh.RefreshShow();var d={url:e,dataType:"html",type:"POST",beforeSubmit:function(){$(" #dataSourceURL").val(n),$(" #dataSourceUser").val(s),$(" #dataSourcePassword").val(i)},success:function(e){return o.refs.Refresh.RefreshHide(),e=JSON.parse(e),"0"==e.code?((0,A.success)(a),r.attr("disabled",!1),void r.on("click",t)):void(0,A.error)(e.msg)}};$(" #FormData").ajaxSubmit(d)}}},{key:"infoTest",value:function(e){e.preventDefault(),this.FromData("/DataSource/testConnect","连接成功",this.infoData,$(' button[ name = "saveBtn" ]'))}},{key:"infoData",value:function(e){e.preventDefault(),this.FromData("/DataSource/modify","保存成功",this.sync,$(' button[ name = "sync" ]'))}},{key:"sync",value:function(){var e=this,a={dataSourceName:this.props.params.dataSourceName};this.refs.Refresh.RefreshShow(),(0,l.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.syncSchemaInfo(a);case 2:"0"==e.props.dataSourceConf.syncSchemaInfo?(e.refs.Refresh.RefreshHide(),e.tableData(e.props.dataSourceConf.syncSchemaInfo)):e.refs.Refresh.RefreshHide();case 3:case"end":return t.stop()}},t,e)}))()}},{key:"cancel",value:function(){this.props.history.replace("/dataSourceConf")}},{key:"render",value:function(){var e=void 0,a=(0,n.default)("div",{},void 0,_,L,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,U,F,(0,n.default)("input",{type:"text",id:"dataSourceURL",name:"connectionConfig.url",className:"form-control",onBlur:this.isExistURL}))),t=(0,n.default)("div",{},void 0,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,M,I,(0,n.default)("input",{type:"text",id:"dataSourceUser",name:"connectionConfig.user",maxLength:16,className:"form-control",onBlur:this.isExistUserName})),(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,P,O,(0,n.default)("input",{type:"password",id:"dataSourcePassword",maxLength:16,name:"connectionConfig.pwd",className:"form-control",onBlur:this.isExistPassword}))),r=this.props.dataSourceConf.selectedRecord.dataSourceType;return e="hive-hadoop2"==r||"hbase"==r?(0,n.default)("div",{},void 0,a,t,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,B,X,(0,n.default)("select",{onChange:this.kerberos,id:"kerberos",name:"connectionConfig.['hive.hdfs.authentication.type']",className:"form-control",style:{width:"100%"}},void 0,H,j)),V,(0,n.default)("div",{id:"dataSourceKerberosDiv",style:{display:this.state.kerberos}},void 0,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,W,K,(0,n.default)("input",{type:"text",id:"dataAuthentication",maxLength:30,name:"connectionConfig.['hive.hdfs.ausmpp.principal']",className:"form-control",placeholder:"ausmpp@EXAMPLE.COM",onBlur:this.isExistAuthentication})),J)):(0,n.default)("div",{},void 0,a,t),(0,n.default)("div",{id:"dataSourceConfAdd"},void 0,N.default.createElement(E.default,{ref:"Refresh"}),(0,n.default)("div",{className:"row"},void 0,(0,n.default)("div",{className:"col-md-7 dataSourceLeft"},void 0,(0,n.default)("div",{className:"box box-primary"},void 0,Z,(0,n.default)("div",{className:"box-body"},void 0,(0,n.default)("div",{className:"row"},void 0,(0,n.default)("form",{id:"FormData",name:"FormData",enctype:"multipart/form-data"},void 0,q,e,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,(0,n.default)("button",{name:"infoTest",className:"btn btn-primary",onClick:this.infoTest},void 0,"连接测试"),(0,n.default)("button",{name:"saveBtn",className:"btn btn-primary",style:{margin:"0px 25px"},disabled:!0},void 0,"保存"),(0,n.default)("button",{name:"leave",className:"btn btn-primary",onClick:this.cancel},void 0," 返回"))))))),(0,n.default)("div",{className:"col-md-5 dataSourceRight"},void 0,(0,n.default)("div",{className:"box box-primary "},void 0,z,(0,n.default)("div",{className:"box-body"},void 0,(0,n.default)("div",{className:"row"},void 0,(0,n.default)("div",{className:"dataSourceNameDiv col-md-12 form-group"},void 0,G,Q,Y,(0,n.default)("table",{id:"dataSoucerList",className:"table table-striped table-bordered",style:{"text-align":"center"}},void 0,(0,n.default)("thead",{},void 0,(0,n.default)("tr",{role:"row"},void 0,(0,n.default)("th",{style:{textAlign:"center"}},void 0,"表信息")))),ee)))))))}}]),a}(S.Component);a.default=ae}});