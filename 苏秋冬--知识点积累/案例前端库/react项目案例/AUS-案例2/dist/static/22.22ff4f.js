webpackJsonp([22,51],{12:function(e,t){"use strict";function a(e,t){var a={data:e.data||[],destroy:!0,scrollXInner:"100%",dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging&&!0,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null,searching:e.searching&&!0,info:e.info&&!0,ordering:e.ordering&&!0};e.scrollX&&(a.scrollX=e.scrollX);var d=void 0;return d=t?$("#"+e.id).dataTable(a):$("#"+e.id).DataTable(a)}function d(e,t,a,d){$("#"+e+" tbody").off(t,a).on(t,a,d)}function r(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.bindTableEvent=d,t.getTableItem=r},141:function(e,t){"use strict";function a(e){for(var t=[],a={},d=0;d<e.length;d++)a[e[d]]||(t.push(e[d]),a[e[d]]=1);return t}function d(e){if(!isNaN(Number(e))&&Number(e)&&Number(e)>=0){for(var t=0,a=["B","KB","M","G","T"];Math.abs(e)>=1024&&(e/=1024,t++,4!==t););var d=Number(e).toFixed(2);return d+" "+a[t]}return"0B"}function r(e,t){if(!e)return"-";var a=0,d=0,r="";d=e.length;for(var n=0;n<d;n++){var i=e.charAt(n);if(a++,escape(i).length>4&&a++,r=r.concat(i),a>=t)return r=r.concat("...")}return a<t?e:void 0}function n(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in a)new RegExp("("+d+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[d]:("00"+a[d]).substr((""+a[d]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayUnique=a,t.unitTransform=d,t.cutStr=r,t.dateFormat=n},202:function(e,t){"use strict";function a(e){var t=$(e.parent).qtip({content:e.content||"",position:{my:"left center",at:"bottom right",target:$(e.parent)},style:{classes:"qtip-blue qtip-shadow"},show:{event:e.event||"mouseenter"}});return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},581:function(e,t,a){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(5),n=d(r),i=a(6),s=d(i),l=a(3),o=d(l),u=a(4),c=d(u),f=a(8),v=d(f),p=a(7),h=d(p),b=a(2),m=d(b),g=a(147),T=d(g),D=a(141),y=a(12),H=d(y),E=a(202),k=d(E),_=a(201),w=d(_),N=(0,n.default)("tr",{},void 0,(0,n.default)("th",{},void 0,"名称"),(0,n.default)("th",{},void 0,"记录数"),(0,n.default)("th",{},void 0,"空间大小"),(0,n.default)("th",{},void 0,"状态"),(0,n.default)("th",{},void 0,"可见性"),(0,n.default)("th",{},void 0,"创建人"),(0,n.default)("th",{},void 0,"创建时间")),x=(0,n.default)("tr",{},void 0,(0,n.default)("th",{},void 0,"名称"),(0,n.default)("th",{},void 0,"记录数"),(0,n.default)("th",{},void 0,"空间大小"),(0,n.default)("th",{},void 0,"状态"),(0,n.default)("th",{},void 0,"可见性"),(0,n.default)("th",{},void 0,"创建人"),(0,n.default)("th",{},void 0,"创建时间"),(0,n.default)("th",{},void 0,"操作")),A=(0,n.default)("button",{type:"submit",name:"createDataset",className:"btn btn-primary"},void 0,"新建"),O=function(e){function t(e){(0,o.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.createTable=a.createTable.bind(a),a.addHandler=a.addHandler.bind(a),a.detailHandler=a.detailHandler.bind(a),a.editHandler=a.editHandler.bind(a),a.removeHandler=a.removeHandler.bind(a),a.removeOKHandler=a.removeOKHandler.bind(a),a.clickOwnerHandler=a.clickOwnerHandler.bind(a),a.privilegeHandler=a.privilegeHandler.bind(a),a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.readDataset()}},{key:"componentDidUpdate",value:function(){this.props.dataset.datasetList.result.data&&this.createTable(this.props.dataset.datasetList.result.data),$('button[name = "createDataset"]').on("click",this.addHandler)}},{key:"createTable",value:function(e){var t={};t.id="datasetList",t.scrollX=!1,t.columns=[{data:"datasetName",defaultContent:"-"},{data:"count",defaultContent:"-"},{data:"size",render:function(e,t,a,d){return(0,D.unitTransform)(e)},defaultContent:"-"},{data:"status",render:function(e,t,a,d){return"ONLINIE"==e?"上线":"下线"},defaultContent:"-"},{data:"visable",render:function(e,t,a,d){return"PRIVATE"==e?"私有":"共享"},defaultContent:"-"},{data:"owner",render:function(e,t,a){var d='<a href="javascript:void(0);" class="owner">'+a.owner+"</a> ";return d},defaultContent:"-"},{data:"createTime",defaultContent:"-"},{data:"privilege",defaultContent:"-"}],t.order=[[6,"desc"]];var a=sessionStorage.getItem("userRolePermission");a.indexOf("DATASET_")!=-1&&(t.columnDefs=[{targets:7,render:function(e,t,a){var d="";return 0!==a.privilege.DATASET.length?(a.privilege.DATASET.indexOf("查看")!=-1&&(d+="<a href='javascript:void(0);'  class='datasetDetail btn btn-default btn-xs'  ><i class='fa fa-file-text-o'></i> 详情</a> "),a.privilege.DATASET.indexOf("修改")!=-1&&(d+="<a href='javascript:void(0);' class='datasetEdit btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),a.privilege.DATASET.indexOf("删除")!=-1&&(d+="<a href='javascript:void(0);' class='datasetRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeDataset\"><i class='fa fa-trash-o'></i> 删除</a> "),a.privilege.DATASET.indexOf("授权")!=-1&&(d+="<a href='javascript:void(0);' class='privilege btn btn-default btn-xs'><i class='fa fa-wrench'></i> 授权</a> ")):d+="<span>  无操作权限<span/>",d}}]),t.data=e,(0,H.default)(t),(0,y.bindTableEvent)("datasetList","click","a.datasetDetail",this.detailHandler),(0,y.bindTableEvent)("datasetList","click","a.datasetEdit",this.editHandler),(0,y.bindTableEvent)("datasetList","click","a.datasetRemove",this.removeHandler),(0,y.bindTableEvent)("datasetList","click","a.privilege",this.privilegeHandler),(0,y.bindTableEvent)("datasetList","click","a.owner",this.clickOwnerHandler),$(".owner").off("click").on("click",this.clickOwnerHandler)}},{key:"clickOwnerHandler",value:function(e){var t=w.default.userDetail($(e.currentTarget).text());t=t.result.detail;var a=(0,k.default)({parent:e.currentTarget,event:"click",content:"<dl><dt>用户名：</dt><dd>"+t.userName+"</dd></dl>\n            <dl><dt>姓名：</dt><dd>"+t.name+"</dd></dl>\n            </dl><dl><dt>部门：</dt><dd>"+t.department+"</dd></dl>\n            </dl><dl><dt>职位：</dt><dd>"+t.position+"</dd></dl>\n            </dl><dl><dt>电话：</dt><dd>"+t.phoneNo+"</dd></dl>\n            <dl><dt>邮箱：</dt><dd>"+t.email+"</dd></dl>"}),d=a.qtip("api");d.show()}},{key:"addHandler",value:function(){this.props.history.replace("/dataSet/add")}},{key:"detailHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.props.history.replace("/dataSet/detail/"+t.datasetName)}},{key:"editHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.props.history.replace("/dataSet/update/"+t.datasetName)}},{key:"privilegeHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.props.history.replace("/dataSet/accredit/"+t.datasetName)}},{key:"removeHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.refs.delDataset.setContent("您确定要删除数据集："+t.datasetName+"吗？")}},{key:"removeOKHandler",value:function(){var e=[];e.push(this.props.dataset.selectedRecord.datasetName),this.props.deleteDataset(e),$("#removeDataset").modal("hide"),window.location.reload()}},{key:"render",value:function(){var e=N,t=sessionStorage.getItem("userRolePermission");t.indexOf("DATASET_")!=-1&&(e=x);var a="";return sessionStorage.getItem("userRolePermission").indexOf("DATASET_CREATE")!=-1&&(a=A),(0,n.default)("div",{id:"datasetManage",className:"box box-primary"},void 0,(0,n.default)("div",{className:"row"},void 0,(0,n.default)("div",{className:"col-md-12"},void 0,(0,n.default)("div",{className:"box-header"},void 0,a),(0,n.default)("div",{className:"box-body"},void 0,(0,n.default)("table",{id:"datasetList",className:"table table-striped table-bordered"},void 0,(0,n.default)("thead",{},void 0,e))))),m.default.createElement(T.default,{modalId:"removeDataset",ref:"delDataset",title:"删除数据集",okHandler:this.removeOKHandler}))}}]),t}(b.Component);t.default=O}});